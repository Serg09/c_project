=content_for :page_title do
  Payment

.container.container-default
  .row
    .col-md-4
      %table.table
        %tr
          %th Amount
          %td= number_to_currency @payment.amount
        %tr
          %th State
          %td= @payment.state
        %tr
          %th External ID
          %td= @payment.external_id
        %tr
          %th Date
          %td= format_date_time @payment.created_at
      =link_to 'Back', admin_campaign_path(@payment.contribution.campaign_id), class: 'btn btn-primary', title: 'Click here to return to the campaign page.'
  .row
    .col-md-12
      %h2 Transactions
      %table#transactions-table.table.table-striped
        %tr
          %th Intent
          %th State
        -@payment.transactions.each do |transaction|
          %tr
            %td= transaction.intent
            %td= transaction.state
          %tr
            %td{ colspan: 2 }
              %pre.payment-detail
                -if transaction.response.start_with? '---'
                  =transaction.response
                -else
                  =JSON.pretty_generate(JSON.parse(transaction.response))
