=content_for :page_title do
  Campaign progress

.container.container-default
  -if @campaign.paused?
    .alert.alert-warning
      This campaign is paused.
  -if @campaign.collecting?
    .alert.alert-info
      This campaign is closed and the funds are being collected. You will be notified when the collection process is complete.
  -if @campaign.collected?
    .alert.alert-info
      This campaign is closed.
  -if @campaign.cancelled?
    .alert.alert-warning
      This campaign has been cancelled.
  .row
    .col-md-12
      %h2= @campaign.book.approved_version.title
  .row
    .col-md-3
      =render 'progress_table'
    .col-md-5
      =render 'donations/table', donations: @campaign.donations
    .col-md-2.text-center
      =render_progress_meter @campaign.current_progress
    .col-md-2
      -unless @campaign.collected?
        .btn-group-vertical
          =link_to 'Collect', collect_campaign_path(@campaign), method: :patch, class: 'btn btn-success', title: 'Click here to collect the donations for this campaign.'
          -if @campaign.active?
            =link_to 'Pause', pause_campaign_path(@campaign), method: :patch, class: 'btn btn-warning', title: 'Click here to pause this campaign.'
          -if @campaign.paused?
            =link_to 'Activate', unpause_campaign_path(@campaign), method: :patch, class: 'btn btn-info', title: 'Click here to activate this campaign.'
          =link_to 'Cancel', cancel_campaign_path(@campaign), method: :patch, class: 'btn btn-danger', title: 'Click here to cancel this campaign.', 'data-confirm' => 'Are you sure you want to cancel this campaign?'
